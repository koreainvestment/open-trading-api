import sys
import logging

import pandas as pd

sys.path.extend(['..', '.'])
import kis_auth as ka
from overseas_price_functions import *

# 로깅 설정
logging.basicConfig(level=logging.INFO, format='%(levelname)s - %(message)s')
logger = logging.getLogger(__name__)

# 인증
ka.auth()
trenv = ka.getTREnv()

##############################################################################################
# [해외주식] 시세분석 > 해외속보(제목) [해외주식-055]
##############################################################################################

result = brknews_title(fid_news_ofer_entp_code="0", fid_cond_scr_div_code="11801")
print(result)

##############################################################################################
# [해외주식] 시세분석 > 당사 해외주식담보대출 가능 종목 [해외주식-051]
##############################################################################################

result1, result2 = colable_by_company(pdno="AMD", natn_cd="840", inqr_sqn_dvsn="01")
print(result1)
print(result2)

##############################################################################################
# [해외주식] 기본시세 > 해외결제일자조회[해외주식-017]
##############################################################################################

df = countries_holiday(trad_dt="20250101", NK="", FK="")
print(df)

##############################################################################################
# [해외주식] 기본시세 > 해외주식 일별기간손익[v1_해외주식-010]
##############################################################################################

df1, df2 = dailyprice(auth="", excd="NYS", symb="TSLA", gubn="0", bymd="", modp="1", env_dv="real")
print(df1)
print(df2)

##############################################################################################
# [해외주식] 기본시세 > 해외주식 업종별코드조회[해외주식-049]
##############################################################################################

result1, result2 = industry_price(excd="NAS")
print(result1)
print(result2)

##############################################################################################
# [해외주식] 기본시세 > 해외주식 업종별시세[해외주식-048]
##############################################################################################

result1, result2 = industry_theme(excd="NAS", icod="010", vol_rang="0")
print(result1)
print(result2)

##############################################################################################
# [해외주식] 기본시세 > 해외주식 현재가 1호가[해외주식-033]
##############################################################################################

df1, df2, df3 = inquire_asking_price(auth="", excd="NYS", symb="TSLA")
print(df1)
print(df2)
print(df3)

##############################################################################################
# [해외주식] 기본시세 > 해외주식 체결추이[해외주식-037]
##############################################################################################

result = inquire_ccnl(excd="NAS", tday="0", symb="TSLA")
print(result)

##############################################################################################
# [해외주식] 기본시세 > 해외주식 종목_지수_환율기간별시세(일_주_월_년)[v1_해외주식-012]
##############################################################################################

df1, df2 = inquire_daily_chartprice(fid_cond_mrkt_div_code="N", fid_input_iscd="DJI", fid_input_date_1="20250101", fid_input_date_2="20250131", fid_period_div_code="D", env_dv="real")
print(df1)
print(df2)

##############################################################################################
# [해외주식] 시세분석 > 해외주식조건검색[v1_해외주식-015]
##############################################################################################

df1, df2 = inquire_search(auth="", excd="NYS", co_yn_pricecur="1", co_st_pricecur="100", co_en_pricecur="200", co_yn_rate="1", co_st_rate="5", co_en_rate="10", co_yn_valx="1", co_st_valx="1000", co_en_valx="5000", co_yn_shar="1", co_st_shar="100", co_en_shar="500", co_yn_volume="1", co_st_volume="1000", co_en_volume="5000", co_yn_amt="1", co_st_amt="1000", co_en_amt="5000", co_yn_eps="1", co_st_eps="1", co_en_eps="5", co_yn_per="1", co_st_per="10", co_en_per="20", keyb="")
print(df1)
print(df2)

##############################################################################################
# [해외주식] 기본시세 > 해외지수분봉조회[v1_해외주식-031]
##############################################################################################

df1, df2 = inquire_time_indexchartprice(fid_cond_mrkt_div_code="N", fid_input_iscd="TSLA", fid_hour_cls_code="0", fid_pw_data_incu_yn="Y")
print(df1)
print(df2)

##############################################################################################
# [해외주식] 기본시세 > 해외주식분봉조회[v1_해외주식-030]
##############################################################################################

df1, df2 = inquire_time_itemchartprice(auth="", excd="NAS", symb="TSLA", nmin="5", pinc="1", next="", nrec="120", fill="", keyb="")
print(df1)
print(df2)

##############################################################################################
# [해외주식] 시세분석 > 해외뉴스종합(제목) [해외주식-053]
##############################################################################################

result = news_title(
            info_gb="",
            class_cd="",
            nation_cd="",
            exchange_cd="",
            symb="",
            data_dt="",
            data_tm="",
            cts=""
        )
print(result)

##############################################################################################
# [해외주식] 시세분석 > 해외주식 기간별권리조회 [해외주식-052]
##############################################################################################

result = period_rights(
            rght_type_cd="%%",
            inqr_dvsn_cd="02",
            inqr_strt_dt="20240417",
            inqr_end_dt="20240417"
        )
print(result)

##############################################################################################
# [해외주식] 기본시세 > 해외주식 현재체결가[v1_해외주식-009]
##############################################################################################

df = price(auth="", excd="NYS", symb="AAPL", env_dv="real")
print(df)

##############################################################################################
# [해외주식] 기본시세 > 해외주식 현재가상세[v1_해외주식-029]
##############################################################################################

df = price_detail(auth="", excd="NYS", symb="TSLA")
print(df)

##############################################################################################
# [해외주식] 시세분석 > 해외주식 권리종합 [해외주식-050]
##############################################################################################

result = rights_by_ice(ncod="US", symb="NVDL")
print(result)

##############################################################################################
# [해외주식] 시세분석 > 해외주식 상품기본정보[v1_해외주식-034]
##############################################################################################

df = search_info(prdt_type_cd="512", pdno="AAPL")
print(df)

