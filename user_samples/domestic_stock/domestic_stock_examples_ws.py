import sys
import logging

import pandas as pd

sys.path.extend(['..', '.'])
import kis_auth as ka
from domestic_stock_functions_ws import *

# 로깅 설정
logging.basicConfig(level=logging.INFO, format='%(levelname)s - %(message)s')
logger = logging.getLogger(__name__)

# 인증
ka.auth()
ka.auth_ws()
trenv = ka.getTREnv()

# 웹소켓 선언
kws = ka.KISWebSocket(api_url="/tryitout")

##############################################################################################
# [국내주식] 실시간시세 > 국내주식 실시간 호가 (KRX) [H0STASP0]
##############################################################################################

kws.subscribe(request=asking_price_krx, data=["005930", "000660"])

##############################################################################################
# [국내주식] 실시간시세 > 국내주식 실시간 호가 (NXT) [H0NXASP0]
##############################################################################################

kws.subscribe(request=asking_price_nxt, data=["005930", "000660"])

##############################################################################################
# [국내주식] 실시간시세 > 국내주식 실시간 호가 (통합) [H0UNASP0]
##############################################################################################

kws.subscribe(request=asking_price_total, data=["005930", "000660"])

##############################################################################################
# [국내주식] 실시간정보 > 국내주식 체결가(KRX) [H0STCNT0]
##############################################################################################

kws.subscribe(request=ccnl_krx, data=["005930", "000660"])

##############################################################################################
# [국내주식] 실시간정보 > 주식체결통보 [H0STCNI0]
##############################################################################################

kws.subscribe(request=ccnl_notice, data=["dttest11"])

##############################################################################################
# [국내주식] 실시간시세 > 국내주식 실시간 체결가 (NXT) [H0NXCNT0]
##############################################################################################

kws.subscribe(request=ccnl_nxt, data=["005930", "000660"])

##############################################################################################
# [국내주식] 실시간시세 > 국내주식 실시간 체결가 (통합) [H0UNCNT0]
##############################################################################################

kws.subscribe(request=ccnl_total, data=["005930", "000660"])

##############################################################################################
# [국내주식] 실시간시세 > 국내주식 실시간예상체결 (KRX)[H0STANC0]
##############################################################################################

kws.subscribe(request=exp_ccnl_krx, data=["005930", "000660"])

##############################################################################################
# [국내주식] 실시간시세 > 국내주식 실시간 예상체결 (NXT) [H0NXANC0]
##############################################################################################

kws.subscribe(
        request=exp_ccnl_nxt,
        data=["005930", "000660", "005380"]
    )

##############################################################################################
# [국내주식] 실시간정보 > 국내주식 예상체결통보(통합) [H0UNANC0]
##############################################################################################

kws.subscribe(request=exp_ccnl_total, data=["005930", "000660"])

##############################################################################################
# [국내주식] 실시간시세 > 국내지수 실시간체결 [H0UPCNT0]
##############################################################################################

kws.subscribe(request=index_ccnl, data=["0001", "0128"])

##############################################################################################
# [국내주식] 실시간시세 > 국내지수 실시간예상체결 [H0UPANC0]
##############################################################################################

kws.subscribe(request=index_exp_ccnl, data=["0001"])

##############################################################################################
# [국내주식] 실시간정보 > 국내주식 지수프로그램매매 [H0UPPGM0]
##############################################################################################

kws.subscribe(request=index_program_trade, data=["0001", "0128"])

##############################################################################################
# [국내주식] 실시간시세 > 국내주식 장운영정보 (KRX) [H0STMKO0]
##############################################################################################

kws.subscribe(request=market_status_krx, data=["417450","308100"])

##############################################################################################
# [국내주식] 실시간정보 > 국내주식 장운영정보(NXT) [H0NXMKO0]
##############################################################################################

kws.subscribe(request=market_status_nxt, data=["006220"])

##############################################################################################
# [국내주식] 실시간정보 > 국내주식 장운영정보(통합) [H0UNMKO0]
##############################################################################################

kws.subscribe(request=market_status_total, data=["158430"])

##############################################################################################
# [국내주식] 실시간 > 국내주식 실시간 회원사 (KRX) [H0STMBC0]
##############################################################################################

kws.subscribe(request=member_krx, data=["005930", "000660"])

##############################################################################################
# [국내주식] 실시간 > 국내주식 실시간회원사 (NXT) [H0NXMBC0]
##############################################################################################

kws.subscribe(request=member_nxt, data=["005930", "000660"])

##############################################################################################
# [국내주식] 실시간 > 국내주식 실시간회원사 (통합) [H0UNMBC0]
##############################################################################################

kws.subscribe(request=member_total, data=["005930", "000660"])

##############################################################################################
# [국내주식] 실시간 > 국내주식 시간외 실시간호가 (KRX) [H0STOAA0]
##############################################################################################

kws.subscribe(request=overtime_asking_price_krx, data=["023460"])

##############################################################################################
# [국내주식] 실시간 > 국내주식 시간외 실시간체결가 (KRX) [H0STOUP0]
##############################################################################################

kws.subscribe(request=overtime_ccnl_krx, data=["023460", "199480", "462860", "440790", "000660"])

##############################################################################################
# [국내주식] 실시간 > 국내주식 시간외 실시간예상체결 (KRX) [H0STOAC0]
##############################################################################################

kws.subscribe(request=overtime_exp_ccnl_krx, data=["023460"])

##############################################################################################
# [국내주식] 실시간 > 국내주식 실시간프로그램매매 (KRX) [H0STPGM0]
##############################################################################################

kws.subscribe(request=program_trade_krx, data=["005930", "000660"])

##############################################################################################
# [국내주식] 실시간 > 국내주식 실시간프로그램매매 (NXT) [H0NXPGM0]
##############################################################################################

kws.subscribe(request=program_trade_nxt, data=["032640", "010950"])

##############################################################################################
# [국내주식] 실시간 > 국내주식 실시간프로그램매매 (통합) [H0UNPGM0]
##############################################################################################

kws.subscribe(request=program_trade_total, data=["005930", "000660"])

# 시작
kws.start(on_result=None)
